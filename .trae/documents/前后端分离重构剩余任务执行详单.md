# 剩余任务详细执行计划

您好！根据刚才的进度，我们已经完成了**目录备份与拆分**（即已经有了 `client` 和 `admin` 两个文件夹）。接下来的任务主要是对这两个文件夹进行“瘦身”和“配置”，最后制作一键启动脚本。

以下是未完成任务的详细清单及执行步骤：

## 1. 客户端项目清理 (`cleanup_client_project`)
*   **目标**：让 `client` 文件夹只包含C端面向顾客的代码。
*   **执行步骤**：
    1.  删除 `client/src/views/admin` 文件夹（移除管理端页面）。
    2.  删除 `client/src/router/modules/admin.js`（移除管理端路由配置）。
    3.  **关键修改**：编辑 `client/src/router/index.js`，移除对 admin 路由的引入，并清理路由守卫中关于“后台鉴权”的代码，只保留前台逻辑。

## 2. 管理端项目清理 (`cleanup_admin_project`)
*   **目标**：让 `admin` 文件夹只包含B端面向商家的代码。
*   **执行步骤**：
    1.  删除 `admin/src/views/client` 文件夹（移除客户端页面）。
    2.  删除 `admin/src/router/modules/client.js`（移除客户端路由配置）。
    3.  **关键修改**：编辑 `admin/src/router/index.js`，移除对 client 路由的引入。
    4.  **重定向配置**：修改根路径 `/` 的行为，使其直接重定向到 `/admin/login`，方便管理员直接访问。

## 3. 客户端配置 (`config_client_project`)
*   **目标**：确保客户端运行在 **5173** 端口。
*   **执行步骤**：
    1.  修改 `client/package.json` 的 `name` 为 `leyi-client`。
    2.  检查 `client/vite.config.js`，确保开发服务器端口配置为 `5173`（Vite默认值，通常无需修改，但会确认）。
    3.  确认 API 代理指向后端 `http://localhost:8080`。

## 4. 管理端配置 (`config_admin_project`)
*   **目标**：确保管理端运行在 **5174** 端口，避免冲突。
*   **执行步骤**：
    1.  修改 `admin/package.json` 的 `name` 为 `leyi-admin`。
    2.  **关键修改**：修改 `admin/vite.config.js`，显式设置 `server.port` 为 **5174**。
    3.  确认 API 代理同样指向后端 `http://localhost:8080`。

## 5. 依赖安装与验证 (`install_and_verify_projects`)
*   **目标**：确保拆分后的项目能跑通。
*   **执行步骤**：
    1.  分别在 `client` 和 `admin` 目录下运行 `npm install`（因为复制文件夹可能需要重新链接依赖，或者直接复用 node_modules 但需验证路径）。
    2.  简单尝试构建或启动，确保没有因为删文件导致“找不到模块”的报错。

## 6. 编写一键启动脚本 (`create_start_script`)
*   **目标**：一键拉起 后端 + 客户端 + 管理端。
*   **执行步骤**：
    1.  在根目录创建 `start_system.bat`。
    2.  脚本内容包含：
        *   启动后端：`cd backend && mvn spring-boot:run`
        *   启动客户端：`cd client && npm run dev`
        *   启动管理端：`cd admin && npm run dev`
        *   自动打开浏览器：`http://localhost:5173` 和 `http://localhost:5174/admin/login`。

## 7. 创建桌面快捷方式 (`create_shortcut_script`)
*   **目标**：生成桌面图标，双击即用。
*   **执行步骤**：
    1.  编写一个临时的 PowerShell 脚本 `create_shortcut.ps1`。
    2.  执行该脚本，在您的桌面生成名为“乐逸零食系统启动”的快捷方式，指向 `start_system.bat`。

## 8. 最终交付 (`final_test_and_docs`)
*   **目标**：收尾。
*   **执行步骤**：
    1.  创建 `README_DEPLOY.md`，记录这套新架构的目录结构和启动方法。

---

**请确认：**
如果您对以上步骤没有异议，请回复“**执行**”，我将按照这个顺序一步步为您完成操作。
