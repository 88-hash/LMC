# 🚑 购物车失效与前端崩溃综合修复计划 (Comprehensive Fix Plan)

**用户反馈**:
1.  **购物车无法添加**: 点击加购无反应或报错。
2.  **订单页崩溃**: 前端报错 `Failed to fetch dynamically imported module` (500错误)。

## 🔍 问题根源分析
1.  **前端 500 错误**: 确认为 Vite 缓存/文件元数据损坏，导致 `Order.vue` 无法加载。
2.  **购物车问题**: 
    *   **代码逻辑**: `CartServiceImpl` 之前添加了严格的校验逻辑（`goodsMapper.selectById`），如果 `goodsId` 无效或 Mapper 注入失败，会抛出异常。
    *   **事务问题**: `Creating a new SqlSession` 日志表明可能存在事务未生效的情况，导致数据回滚。
    *   **前端反馈**: `Home.vue` 中的 `addToCart` 虽然加了 `try-catch`，但如果后端返回 500，前端可能只在控制台报错而无 UI 提示。

## 🛠️ 修复步骤

### 第一阶段：修复购物车后端逻辑 (Backend)
1.  **动作**: 检查并修正 `CartServiceImpl.java`。
    *   **移除/优化校验**: 暂时注释掉 `goodsMapper.selectById` 和库存检查逻辑，先确保最基础的“添加”功能可用。
    *   **事务确认**: 确保 `@Transactional` 注解生效。
2.  **动作**: 增强 `CartController` 日志。
    *   添加详细的 `try-catch` 和 `e.printStackTrace()`，确保任何异常都能在控制台看到。

### 第二阶段：修复前端路由错误 (Frontend)
1.  **动作**: 重写 `frontend/src/views/Order.vue` 文件。
    *   **目的**: 更新文件时间戳，强制 Vite 重新编译，解决 `Failed to fetch` 错误。
2.  **动作**: 重启前端服务。
    *   **目的**: 清理 Vite 内存缓存。

### 第三阶段：全流程验证
1.  **加购**: 在首页点击加购 -> 观察控制台网络请求 -> 确认数据库 `cart` 表有数据。
2.  **路由**: 点击底部“订单” -> 确认页面正常加载，无 500 错误。

---
*请批准执行，我将同时解决这两个阻碍流程的关键问题。*